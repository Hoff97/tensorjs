<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@hoff97/tensor-js</title>
	<meta name="description" content="Documentation for @hoff97/tensor-js">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">@hoff97/tensor-js</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>Project @hoff97/tensor-js</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#tensorjs" id="tensorjs" style="color: inherit; text-decoration: none;">
					<h1>TensorJS</h1>
				</a>
				<p><img src="https://github.com/Hoff97/tensorjs/workflows/Test/badge.svg?branch=develop" alt="Test">
				<img src="https://img.shields.io/npm/v/@hoff97/tensor-js" alt="Version"></p>
				<p>This is a JS/TS library for accelerated tensor computation intended to be
					run in the browser. It contains an implementation for numpy-style
				multidimensional arrays and their operators.</p>
				<p>It also allows executing Onnx models. For examples check the <a href="https://github.com/Hoff97/tensorjs/tree/develop/examples/">examples folder</a>.</p>
				<p>There are three execution backends available:</p>
				<ul>
					<li><strong>CPU:</strong> This is implemented in plain javascript and thus
					not very fast. It is intended to be a reference implementation. Big optimizations are avoided for simplicity.</li>
					<li><strong>Web Assembly:</strong> This is implemented in Rust. It is
						optimized for faster execution (although right now
					there is a lot of work to be done).</li>
					<li><strong>GPU:</strong> This uses WebGL to enable very fast execution and
						should be used whenever a GPU is available. It is typically
						~10-100 times faster than the WASM backend (except for
						a few operators). Most of the development focus was spent here
					so this is by far the fastest backend.</li>
				</ul>
				<a href="#how-to-use" id="how-to-use" style="color: inherit; text-decoration: none;">
					<h1>How to use</h1>
				</a>
				<p>Install with</p>
				<pre><code class="language-shell"><span style="color: #000000">$ npm install @hoff97/tensor-js</span>
</code></pre>
				<p>and then import</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">tjs</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@hoff97/tensor-js&#039;</span><span style="color: #000000">;</span>
</code></pre>
				<p>or import the stuff you need directly.</p>
				<a href="#tensors" id="tensors" style="color: inherit; text-decoration: none;">
					<h2>Tensors</h2>
				</a>
				<p>You can create tensors of the respective backend like this:</p>
				<ul>
					<li>CPU:<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">tensor</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">tjs</span><span style="color: #000000">.</span><span style="color: #267F99">tensor</span><span style="color: #000000">.</span><span style="color: #267F99">cpu</span><span style="color: #000000">.</span><span style="color: #267F99">CPUTensor</span><span style="color: #000000">([</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">], [</span><span style="color: #098658">1</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">3</span><span style="color: #000000">,</span><span style="color: #098658">4</span><span style="color: #000000">]);</span>
</code></pre>
					</li>
					<li>WASM:<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">tensor</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">tjs</span><span style="color: #000000">.</span><span style="color: #267F99">tensor</span><span style="color: #000000">.</span><span style="color: #267F99">wasm</span><span style="color: #000000">.</span><span style="color: #267F99">WASMTensor</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">Float32Array</span><span style="color: #000000">([</span><span style="color: #098658">1</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">3</span><span style="color: #000000">,</span><span style="color: #098658">4</span><span style="color: #000000">]), [</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">]);</span>
</code></pre>
					</li>
					<li>GPU:<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">tensor</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">tjs</span><span style="color: #000000">.</span><span style="color: #267F99">tensor</span><span style="color: #000000">.</span><span style="color: #267F99">gpu</span><span style="color: #000000">.</span><span style="color: #267F99">GPUTensor</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">Float32Array</span><span style="color: #000000">([</span><span style="color: #098658">1</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">3</span><span style="color: #000000">,</span><span style="color: #098658">4</span><span style="color: #000000">]), [</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">]);</span>
</code></pre>
						or directly from an image/video element:<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">video</span><span style="color: #000000">: </span><span style="color: #267F99">HTMLVideoElement</span><span style="color: #000000"> = </span><span style="color: #001080">document</span><span style="color: #000000">.</span><span style="color: #795E26">querySelector</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;#videoElement&quot;</span><span style="color: #000000">);</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">tensor</span><span style="color: #000000"> = </span><span style="color: #001080">tjs</span><span style="color: #000000">.</span><span style="color: #001080">tensor</span><span style="color: #000000">.</span><span style="color: #001080">gpu</span><span style="color: #000000">.</span><span style="color: #001080">GPUTensor</span><span style="color: #000000">.</span><span style="color: #795E26">fromData</span><span style="color: #000000">(</span><span style="color: #001080">video</span><span style="color: #000000">);</span>
</code></pre>
						which will be a tensor with shape <code>[height,width,4]</code> and data type <code>float32</code>.
						Creating a GPU tensor from a video element will usually be pretty fast.
						Creation from an image not necessarily, since here the image data
					first has to be transferred to the GPU.</li>
				</ul>
				<a href="#tensor-operations" id="tensor-operations" style="color: inherit; text-decoration: none;">
					<h3>Tensor operations</h3>
				</a>
				<p>Once you have created a tensor, you can do operations on it, for example:</p>
				<ul>
					<li>Add two tensors<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">res</span><span style="color: #000000"> = </span><span style="color: #001080">a</span><span style="color: #000000">.</span><span style="color: #795E26">add</span><span style="color: #000000">(</span><span style="color: #001080">b</span><span style="color: #000000">);</span>
</code></pre>
					</li>
					<li>Matrix multiplication<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">res</span><span style="color: #000000"> = </span><span style="color: #001080">a</span><span style="color: #000000">.</span><span style="color: #795E26">matMul</span><span style="color: #000000">(</span><span style="color: #001080">b</span><span style="color: #000000">);</span>
</code></pre>
					</li>
					<li>Find the maximum<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">res</span><span style="color: #000000"> = </span><span style="color: #001080">a</span><span style="color: #000000">.</span><span style="color: #795E26">max</span><span style="color: #000000">(</span><span style="color: #098658">1</span><span style="color: #000000">);</span>
</code></pre>
					</li>
				</ul>
				<p>For a list of all operators, see the <a href="https://hoff97.github.io/tensorjs/classes/tensor.html">docs</a>.
				Most operators will behave like their numpy/pytorch counterparts.</p>
				<a href="#reading-values" id="reading-values" style="color: inherit; text-decoration: none;">
					<h3>Reading values</h3>
				</a>
				<p>When you want to read data from a tensor:</p>
				<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">values</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">tensor</span><span style="color: #000000">.</span><span style="color: #795E26">getValues</span><span style="color: #000000">();</span>
</code></pre>
				<p>which will give you the values as a array of the values.
				For CPU tensors you can also get the value at an index:</p>
				<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">value</span><span style="color: #000000"> = </span><span style="color: #001080">tensor</span><span style="color: #000000">.</span><span style="color: #795E26">get</span><span style="color: #000000">([</span><span style="color: #098658">1</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">3</span><span style="color: #000000">,</span><span style="color: #098658">4</span><span style="color: #000000">]);</span>
</code></pre>
				<a href="#data-types" id="data-types" style="color: inherit; text-decoration: none;">
					<h3>Data types</h3>
				</a>
				<p>Tensors are created with float values (using 32 bits) by default.
				You can specify another data type on creation:</p>
				<pre><code class="language-typescript"><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">tensor</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">tjs</span><span style="color: #000000">.</span><span style="color: #267F99">tensor</span><span style="color: #000000">.</span><span style="color: #267F99">cpu</span><span style="color: #000000">.</span><span style="color: #267F99">CPUTensor</span><span style="color: #000000">([</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">], [</span><span style="color: #098658">1</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">3</span><span style="color: #000000">,</span><span style="color: #098658">4</span><span style="color: #000000">], </span><span style="color: #A31515">&#039;float16&#039;</span><span style="color: #000000">);</span>
</code></pre>
				<p>or cast to another data type with:</p>
				<pre><code class="language-typescript"><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">casted</span><span style="color: #000000"> = </span><span style="color: #001080">tensor</span><span style="color: #000000">.</span><span style="color: #795E26">cast</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;float16&#039;</span><span style="color: #000000">);</span>
</code></pre>
				<p>The available data types are <code>float64</code>, <code>float32</code>, <code>float16</code>, <code>int32</code>, <code>int16</code>, <code>int8</code>, <code>uint32</code>, <code>uint16</code>, <code>uint8</code>.
				Note that not all backends support all data types:</p>
				<ul>
					<li>CPU: Supports all data types, but <code>float16</code> will be represented as <code>float32</code> internally</li>
					<li>WASM: Supports all except <code>float16</code></li>
					<li>GPU: Supports all except <code>float64</code>. Note that except for <code>float16</code>, all other data types will be
						represented by <code>float32</code> internally, since WebGL1 does not allow writing anything else than floats to
					frame buffers. This means that for <code>int32</code> and <code>uint32</code>, not the whole range of the respective data type is available.</li>
				</ul>
				<p>The data type of a tensor can be accessed via <code>tensor.dtype</code>. Additionally, each tensor has a generic type argument,
				which will carry its data type:</p>
				<pre><code class="language-typescript"><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">tensor</span><span style="color: #000000">: </span><span style="color: #267F99">Tensor</span><span style="color: #000000">&lt;</span><span style="color: #A31515">&#039;float16&#039;</span><span style="color: #000000">&gt; = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">tjs</span><span style="color: #000000">.</span><span style="color: #267F99">tensor</span><span style="color: #000000">.</span><span style="color: #267F99">cpu</span><span style="color: #000000">.</span><span style="color: #267F99">CPUTensor</span><span style="color: #000000">([</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">], [</span><span style="color: #098658">1</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">3</span><span style="color: #000000">,</span><span style="color: #098658">4</span><span style="color: #000000">], </span><span style="color: #A31515">&#039;float16&#039;</span><span style="color: #000000">);</span>
</code></pre>
				<p>This allows type checking tensor operations, which means that only tensor operations with the same
					data type compile when using typescript.
				The generic type defaults to <code>float32</code>. If you want to represent the data type of a tensor with an unknown data type, write for example</p>
				<pre><code class="language-typescript"><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">tensor</span><span style="color: #000000">: </span><span style="color: #267F99">Tensor</span><span style="color: #000000">&lt;</span><span style="color: #267F99">any</span><span style="color: #000000">&gt; = </span><span style="color: #001080">a</span><span style="color: #000000">.</span><span style="color: #795E26">add</span><span style="color: #000000">(</span><span style="color: #001080">b</span><span style="color: #000000">);</span>
</code></pre>
				<a href="#converting-between-backends" id="converting-between-backends" style="color: inherit; text-decoration: none;">
					<h3>Converting between backends</h3>
				</a>
				<p>You can conver a tensor to a different backend like so:</p>
				<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">cpuTensor</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">tjs</span><span style="color: #000000">.</span><span style="color: #001080">util</span><span style="color: #000000">.</span><span style="color: #001080">convert</span><span style="color: #000000">.</span><span style="color: #795E26">toCPU</span><span style="color: #000000">(</span><span style="color: #001080">tensor</span><span style="color: #000000">);</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">wasmTensor</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">tjs</span><span style="color: #000000">.</span><span style="color: #001080">util</span><span style="color: #000000">.</span><span style="color: #001080">convert</span><span style="color: #000000">.</span><span style="color: #795E26">toWASM</span><span style="color: #000000">(</span><span style="color: #001080">tensor</span><span style="color: #000000">);</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">gpuTensor</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">tjs</span><span style="color: #000000">.</span><span style="color: #001080">util</span><span style="color: #000000">.</span><span style="color: #001080">convert</span><span style="color: #000000">.</span><span style="color: #795E26">toGPU</span><span style="color: #000000">(</span><span style="color: #001080">tensor</span><span style="color: #000000">);</span>
</code></pre>
				<p>Note that converting to/from a GPU tensor is very expensive and should
				be prevented if possible.</p>
				<a href="#onnx-model-support" id="onnx-model-support" style="color: inherit; text-decoration: none;">
					<h2>Onnx model support</h2>
				</a>
				<p>You can load an onnx model like this:</p>
				<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">res</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #795E26">fetch</span><span style="color: #000000">(</span><span style="color: #A31515">`model.onnx`</span><span style="color: #000000">);</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">buffer</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">res</span><span style="color: #000000">.</span><span style="color: #795E26">arrayBuffer</span><span style="color: #000000">();</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">model</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">tjs</span><span style="color: #000000">.</span><span style="color: #267F99">onnx</span><span style="color: #000000">.</span><span style="color: #267F99">model</span><span style="color: #000000">.</span><span style="color: #267F99">OnnxModel</span><span style="color: #000000">(</span><span style="color: #001080">buffer</span><span style="color: #000000">);</span>
</code></pre>
				<p>To see all supported operators, check the <a href="https://github.com/Hoff97/tensorjs/blob/master/doc/Operators.md">supported operator list</a>.</p>
				<p>You will very likely want to run this model on the GPU. To do this:</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">model</span><span style="color: #000000">.</span><span style="color: #795E26">toGPU</span><span style="color: #000000">();</span>
</code></pre>
				<a href="#optimizations" id="optimizations" style="color: inherit; text-decoration: none;">
					<h3>Optimizations</h3>
				</a>
				<p>There are a few optimization passes that can be done on an Onnx model to get faster execution.
				To do this, run</p>
				<pre><code class="language-typescript"><span style="color: #001080">model</span><span style="color: #000000">.</span><span style="color: #795E26">optimize</span><span style="color: #000000">()</span>
</code></pre>
				<a href="#running-with-half-precision" id="running-with-half-precision" style="color: inherit; text-decoration: none;">
					<h3>Running with half precision</h3>
				</a>
				<p>By default full precision floats (32-bits) are used for model execution.
					On the GPU backend, you can try executing with
					half precision, but be aware that this might not work for all models.
				To use half precision, specify this when loading the model:</p>
				<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">model</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">tjs</span><span style="color: #000000">.</span><span style="color: #267F99">onnx</span><span style="color: #000000">.</span><span style="color: #267F99">model</span><span style="color: #000000">.</span><span style="color: #267F99">OnnxModel</span><span style="color: #000000">(</span><span style="color: #001080">buffer</span><span style="color: #000000">, {</span>
<span style="color: #000000">  </span><span style="color: #001080">precision:</span><span style="color: #000000"> </span><span style="color: #098658">16</span>
<span style="color: #000000">})</span>
<span style="color: #001080">model</span><span style="color: #000000">.</span><span style="color: #795E26">toGPU</span><span style="color: #000000">();</span>
</code></pre>
				<p>For the best performance you should also create your GPU tensors with half precision</p>
				<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">tensor</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">tjs</span><span style="color: #000000">.</span><span style="color: #267F99">tensor</span><span style="color: #000000">.</span><span style="color: #267F99">gpu</span><span style="color: #000000">.</span><span style="color: #267F99">GPUTensor</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">Float32Array</span><span style="color: #000000">([</span><span style="color: #098658">1</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">3</span><span style="color: #000000">,</span><span style="color: #098658">4</span><span style="color: #000000">]), [</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">], </span><span style="color: #A31515">&#039;float16&#039;</span><span style="color: #000000">);</span>
</code></pre>
				<p>The outputs of the model will be half-precision tensors as well.
					To read the values of a half precision gpu tensor, you have to convert
				it to full precision first, which can be done with:</p>
				<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">values</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">tensor</span><span style="color: #000000">.</span><span style="color: #795E26">cast</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;float32&#039;</span><span style="color: #000000">).</span><span style="color: #795E26">getValues</span><span style="color: #000000">();</span>
</code></pre>
				<a href="#other-performance-considerations" id="other-performance-considerations" style="color: inherit; text-decoration: none;">
					<h3>Other performance considerations</h3>
				</a>
				<p>Try to run your models with static input sizes. TensorJS will compile specialized versions of all operations
				after enough forward passes. For this the input shapes of the tensors have to be constant though.</p>
				<a href="#autograd-functionality" id="autograd-functionality" style="color: inherit; text-decoration: none;">
					<h2>Autograd functionality</h2>
				</a>
				<p>Automatic differentiation is supported. For this create variables from all your tensors:</p>
				<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">a</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">tjs</span><span style="color: #000000">.</span><span style="color: #267F99">tensor</span><span style="color: #000000">.</span><span style="color: #267F99">cpu</span><span style="color: #000000">.</span><span style="color: #267F99">CPUTensor</span><span style="color: #000000">([</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">], [</span><span style="color: #098658">1</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">3</span><span style="color: #000000">,</span><span style="color: #098658">4</span><span style="color: #000000">]);</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">b</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">tjs</span><span style="color: #000000">.</span><span style="color: #267F99">tensor</span><span style="color: #000000">.</span><span style="color: #267F99">cpu</span><span style="color: #000000">.</span><span style="color: #267F99">CPUTensor</span><span style="color: #000000">([</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">], [</span><span style="color: #098658">5</span><span style="color: #000000">,</span><span style="color: #098658">6</span><span style="color: #000000">,</span><span style="color: #098658">7</span><span style="color: #000000">,</span><span style="color: #098658">8</span><span style="color: #000000">]);</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">varA</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">tjs</span><span style="color: #000000">.</span><span style="color: #267F99">autograd</span><span style="color: #000000">.</span><span style="color: #267F99">Variable</span><span style="color: #000000">(</span><span style="color: #001080">a</span><span style="color: #000000">);</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">varB</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">tjs</span><span style="color: #000000">.</span><span style="color: #267F99">autograd</span><span style="color: #000000">.</span><span style="color: #267F99">Variable</span><span style="color: #000000">(</span><span style="color: #001080">b</span><span style="color: #000000">);</span>
</code></pre>
				<p>Or use the utility methods:</p>
				<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">varA</span><span style="color: #000000"> = </span><span style="color: #001080">tjs</span><span style="color: #000000">.</span><span style="color: #001080">autograd</span><span style="color: #000000">.</span><span style="color: #001080">Variable</span><span style="color: #000000">.</span><span style="color: #795E26">create</span><span style="color: #000000">([</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">], [</span><span style="color: #098658">1</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">3</span><span style="color: #000000">,</span><span style="color: #098658">4</span><span style="color: #000000">], </span><span style="color: #A31515">&#039;GPU&#039;</span><span style="color: #000000">);</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">videoElement</span><span style="color: #000000"> = </span><span style="color: #001080">document</span><span style="color: #000000">.</span><span style="color: #795E26">querySelector</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;#videoElement&quot;</span><span style="color: #000000">);</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">varB</span><span style="color: #000000"> = </span><span style="color: #001080">tjs</span><span style="color: #000000">.</span><span style="color: #001080">autograd</span><span style="color: #000000">.</span><span style="color: #001080">Variable</span><span style="color: #000000">.</span><span style="color: #795E26">fromData</span><span style="color: #000000">(</span><span style="color: #001080">videoElement</span><span style="color: #000000">);</span>
</code></pre>
				<p>Afterwards you can perform normal tensor operations:</p>
				<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">mul</span><span style="color: #000000"> = </span><span style="color: #001080">varA</span><span style="color: #000000">.</span><span style="color: #795E26">matMul</span><span style="color: #000000">(</span><span style="color: #001080">varB</span><span style="color: #000000">);</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">sum</span><span style="color: #000000"> = </span><span style="color: #001080">mul</span><span style="color: #000000">.</span><span style="color: #795E26">sum</span><span style="color: #000000">();</span>
</code></pre>
				<p>To perform a backward pass, call backward on a scalar tensor (a tensor with shape <code>[1]</code>).
				All variables will have an attribute <code>.grad</code>, which is the gradient</p>
				<pre><code class="language-typescript"><span style="color: #001080">sum</span><span style="color: #000000">.</span><span style="color: #795E26">backward</span><span style="color: #000000">();</span>

<span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">varA</span><span style="color: #000000">.</span><span style="color: #001080">grad</span><span style="color: #000000">);</span>
</code></pre>
				<p>Multiple backward passes will add up the gradients.
				After you are done with the variable, delete the computation graph by calling <code>delete()</code>.</p>
				<a href="#documentation" id="documentation" style="color: inherit; text-decoration: none;">
					<h1>Documentation</h1>
				</a>
				<p>You can find the documentation <a href="https://hoff97.github.io/tensorjs/">here</a>.</p>
				<a href="#contributing" id="contributing" style="color: inherit; text-decoration: none;">
					<h1>Contributing</h1>
				</a>
				<p>See <a href="https://github.com/Hoff97/tensorjs/blob/develop/doc/Contributing.md">Contributing.md</a></p>
				<a href="#development" id="development" style="color: inherit; text-decoration: none;">
					<h1>Development</h1>
				</a>
				<p>See <a href="https://github.com/Hoff97/tensorjs/blob/develop/doc/Development.md">Development.md</a></p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Exports</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/autograd.html">autograd</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/model.html">model</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/onnx.html">onnx</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/tensor.html">tensor</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/util.html">util</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-class tsd-has-type-parameter">
						<a href="classes/tensor.html" class="tsd-kind-icon">Tensor</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#activation" class="tsd-kind-icon">Activation</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#dtype" class="tsd-kind-icon">DType</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#padmode" class="tsd-kind-icon">Pad<wbr>Mode</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>